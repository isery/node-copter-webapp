/*! Keydrown - v0.1.0 - 2013-04-20 - http://jeremyckahn.github.com/keydrown */
(function(n){var t=function(){var t={};t.forEach=function(n,t){var e;for(e in n)n.hasOwnProperty([e])&&t(n[e],e)};var e=t.forEach;t.getTranspose=function(n){var t={};return e(n,function(n,e){t[n]=e}),t},t.indexOf=function(n,t){if(n.indexOf)return n.indexOf(t);var e,o=n.length;for(e=0;o>e;e++)if(n[e]===t)return e;return-1};var o=t.indexOf;return t.pushUnique=function(n,t){-1===o(n,t)&&n.push(t)},t.removeValue=function(n,t){var e=o(n,t);return-1!==e?n.splice(e,1)[0]:void 0},t.documentOn=function(t,e){n.addEventListener?n.addEventListener(t,e,!1):document.attachEvent&&document.attachEvent("on"+t,e)},t.requestAnimationFrame=function(){return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)}}(),t.noop=function(){},t}(),e={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},o=t.getTranspose(e),r=[],u=function(){"use strict";function n(){}return n.prototype._downHandler=t.noop,n.prototype._upHandler=t.noop,n.prototype.down=function(n){n?this._downHandler=n:this._downHandler()},n.prototype.up=function(n){n?this._upHandler=n:this._upHandler()},n.prototype.unbindDown=function(){this._downHandler=t.noop},n.prototype.unbindUp=function(){this._upHandler=t.noop},n}(),i=function(r){"use strict";var i={};i.Key=u;var a=!1;return i.tick=function(){var n,t=r.length;for(n=0;t>n;n++){var e=r[n],u=o[e];u&&i[u].down()}},i.run=function(e){a=!0,t.requestAnimationFrame.call(n,function(){a&&(i.run(e),e())})},i.stop=function(){a=!1},t.forEach(e,function(n,t){i[t]=new u}),t.documentOn("keydown",function(n){t.pushUnique(r,n.keyCode)}),t.documentOn("keyup",function(n){var e=t.removeValue(r,n.keyCode),u=o[e];u&&i[u].up()}),i}(r);"function"==typeof define&&define.amd?define(function(){return i}):n.kd=i})(this);